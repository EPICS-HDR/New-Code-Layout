{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Data Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>
{% include 'sources/header.html' %}

{% include 'sources/fields.html' %}

<div class="container">
    <div class="my-3 w-100">
        <div class="d-flex w-100 m-auto gap-2 align-items-center">
            *Download
            <select name="selected-files" class="form-select form-select-sm" style="width: 200px">
                <option>selected files</option>
            </select>
            as
            <select name="file-type" class="form-select form-select-sm" style="width: 200px">
                <option>json</option>
                <option>csv</option>
                <option>pdf</option>
            </select>

        </div>
    </div>

    <div class="my-3 w-100">
        <div class="d-flex w-100 m-auto gap-2 align-items-center">
            Search:
            <input placeholder="Enter search keyword" class="form-control w-25 form-control-sm me-3"/>
            <button class="btn btn-primary btn-sm">Select All</button>
            <button class="btn btn-primary btn-sm">Clear All</button>
        </div>
    </div>

    <table class="table table-bordered table-hover table-light">
        <thead class="thead-dark">
        <tr>
            <th>Filename
                <i class="bi bi-sort-up"></i>
            </th>
            <th>Product (Collection)
                <i class="bi bi-sort-up"></i>
            </th>
            <th>Date / Time
                <i class="bi bi-sort-up"></i>
            </th>
            <th>Download</th>

        </tr>
        </thead>
        <tbody id="tableBody">
        <tr>
            <td>AERDB D3 WIIRS NOAA20.A2024032.002.2024036000725.nc
                <i class="bi bi-info-circle-fill"></i>
            </td>
            <td>
                AERDB D3 VIRS NOAA20(5200)
            </td>
            <td>
                2024-02-01 00:00:00
            </td>
            <td>
                <a class="text-info text-decoration-none">
                    <i class="bi bi-download me-2"></i>
                    4MB
                </a>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="w-100 d-flex justify-content-end">
        <nav aria-label="Page navigation example">
          <ul class="pagination">
            <li class="page-item"><a class="page-link" href="#">Previous</a></li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">Next</a></li>
          </ul>
        </nav>
    </div>
</div>

{% include 'sources/missing.html' %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const downloadButton = document.querySelector('#download-btn'); // 假设你的下载按钮有一个ID或者你可以用其他选择器选中它
        downloadButton.addEventListener('click', function() {
            const selectedFiles = document.querySelector('select[name="selected-files"]').value;
            const fileType = document.querySelector('select[name="file-type"]').value;

            // 构建请求URL
            const url = `/download?fileType=${fileType}&files=${selectedFiles}`;
            window.location.href = url; // 导航到URL以下载文件
        });
    });
    </script>
</body>
</html>
